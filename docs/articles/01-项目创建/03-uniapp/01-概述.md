# uniapp åŸºç¡€

## uni-app å’ŒåŸç”Ÿå°ç¨‹åºå¼€å‘åŒºåˆ«

### å¼€å‘åŒºåˆ«

uni-app é¡¹ç›®æ¯ä¸ªé¡µé¢æ˜¯ä¸€ä¸ª `.vue` æ–‡ä»¶ï¼Œæ•°æ®ç»‘å®šåŠäº‹ä»¶å¤„ç†åŒ `Vue.js` è§„èŒƒï¼š

1. å±æ€§ç»‘å®š `src="{ { url }}"` å‡çº§æˆ `:src="url"`

2. äº‹ä»¶ç»‘å®š `bindtap="eventName"` å‡çº§æˆ `@tap="eventName"`ï¼Œ**æ”¯æŒï¼ˆï¼‰ä¼ å‚**

3. æ”¯æŒ Vue å¸¸ç”¨**æŒ‡ä»¤** `v-for`ã€`v-if`ã€`v-show`ã€`v-model` ç­‰

### å…¶ä»–åŒºåˆ«è¡¥å……

1. è°ƒç”¨æ¥å£èƒ½åŠ›ï¼Œ**å»ºè®®å‰ç¼€** `wx` æ›¿æ¢ä¸º `uni` ï¼Œå…»æˆå¥½ä¹ æƒ¯ï¼Œ**æ”¯æŒå¤šç«¯å¼€å‘**ã€‚
2. `<style>` é¡µé¢æ ·å¼ä¸éœ€è¦å†™ `scoped`ï¼Œå°ç¨‹åºæ˜¯å¤šé¡µé¢åº”ç”¨ï¼Œ**é¡µé¢æ ·å¼è‡ªåŠ¨éš”ç¦»**ã€‚
3. **ç”Ÿå‘½å‘¨æœŸåˆ†ä¸‰éƒ¨åˆ†**ï¼šåº”ç”¨ç”Ÿå‘½å‘¨æœŸ(å°ç¨‹åº)ï¼Œé¡µé¢ç”Ÿå‘½å‘¨æœŸ(å°ç¨‹åº)ï¼Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸ(Vue)



## åˆ›å»º uni-app é¡¹ç›®æ–¹å¼

**uni-app æ”¯æŒä¸¤ç§æ–¹å¼åˆ›å»ºé¡¹ç›®ï¼š**

1. é€šè¿‡ HBuilderX åˆ›å»ºï¼ˆéœ€å®‰è£… HBuilderX ç¼–è¾‘å™¨ï¼‰

2. é€šè¿‡å‘½ä»¤è¡Œåˆ›å»ºï¼ˆéœ€å®‰è£… NodeJS ç¯å¢ƒï¼‰

### HBuilderX åˆ›å»º uni-app é¡¹ç›®

**1.ä¸‹è½½å®‰è£… HbuilderX ç¼–è¾‘å™¨**

![ä¸‹è½½å®‰è£… HbuilderX ç¼–è¾‘å™¨](../../../public/image-uniapp_picture_1.png)

**2.é€šè¿‡ HbuilderX åˆ›å»º uni-app vue3 é¡¹ç›®**

![é€šè¿‡ HbuilderX åˆ›å»º uni-app vue3 é¡¹ç›®](../../../public/image-uniapp_picture_2.png)

**3.å®‰è£… uni-app vue3 ç¼–è¯‘å™¨æ’ä»¶**

![å®‰è£… uni-app vue3 ç¼–è¯‘å™¨æ’ä»¶](../../../public/image-uniapp_picture_3.png)

**4.ç¼–è¯‘æˆå¾®ä¿¡å°ç¨‹åºç«¯ä»£ç **

![ç¼–è¯‘æˆå¾®ä¿¡å°ç¨‹åºç«¯ä»£ç ](../../../public/image-uniapp_picture_4.png)

**5.å¼€å¯æœåŠ¡ç«¯å£**

![å¼€å¯æœåŠ¡ç«¯å£](../../../public/image-uniapp_picture_5.png)

**å°æŠ€å·§åˆ†äº«ï¼šæ¨¡æ‹Ÿå™¨çª—å£åˆ†ç¦»å’Œç½®é¡¶**

![æ¨¡æ‹Ÿå™¨çª—å£åˆ†ç¦»å’Œç½®é¡¶](../../../public/image-uniapp_picture_6.png)

**HBuildeX å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»**

![HBuildeX å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»](../../../public/image-uniapp_picture_7.png)

::: tip æ¸©é¦¨æç¤º
[HBuildeX](https://www.dcloud.io/hbuilderx.html) å’Œ [uni-app](https://uniapp.dcloud.net.cn/) éƒ½å±äº [DCloud](https://dcloud.io) å…¬å¸çš„äº§å“ã€‚
:::

### å‘½ä»¤è¡Œåˆ›å»º uni-app é¡¹ç›®

**ä¼˜åŠ¿**

é€šè¿‡å‘½ä»¤è¡Œåˆ›å»º uni-app é¡¹ç›®ï¼Œ**ä¸å¿…ä¾èµ– HBuilderX**ï¼ŒTypeScript ç±»å‹æ”¯æŒå‹å¥½ã€‚

**å‘½ä»¤è¡Œåˆ›å»º** **uni-app** **é¡¹ç›®ï¼š**

vue3 + ts ç‰ˆ

::: code-group

```sh [github]
# é€šè¿‡ npx ä» github ä¸‹è½½
npx degit dcloudio/uni-preset-vue#vite-ts é¡¹ç›®åç§°
```

```sh [ğŸ‘‰å›½å†… gitee]
# é€šè¿‡ git ä» gitee å…‹éš†ä¸‹è½½ (ğŸ‘‰å¤‡ç”¨åœ°å€)
git clone -b vite-ts https://gitee.com/dcloud/uni-preset-vue.git
```

```
npx degit dcloudio/uni-preset-vue#vite-ts åŸå§‹é¡¹ç›®
```

:::

åˆ›å»ºå…¶ä»–ç‰ˆæœ¬å¯æŸ¥çœ‹ï¼š[uni-app å®˜ç½‘](https://uniapp.dcloud.net.cn/quickstart-cli.html)

::: danger å¸¸è§é—®é¢˜

- è¿è¡Œ `npx` å‘½ä»¤ä¸‹è½½å¤±è´¥ï¼Œè¯·å°è¯•æ¢æˆ**æ‰‹æœºçƒ­ç‚¹é‡è¯•**
- æ¢æ‰‹æœºçƒ­ç‚¹ä¾æ—§å¤±è´¥ï¼Œè¯·å°è¯•ä»[å›½å†…å¤‡ç”¨åœ°å€ä¸‹è½½](https://gitee.com/dcloud/uni-preset-vue/tree/vite-ts/)
- åœ¨ `manifest.json` æ–‡ä»¶æ·»åŠ  [å°ç¨‹åº AppID](https://mp.weixin.qq.com/) ç”¨äºçœŸæœºé¢„è§ˆ
- è¿è¡Œ `npx` å‘½ä»¤éœ€ä¾èµ– NodeJS ç¯å¢ƒï¼Œ[NodeJS ä¸‹è½½åœ°å€](https://nodejs.org/zh-cn)
- è¿è¡Œ `git` å‘½ä»¤éœ€ä¾èµ– Git ç¯å¢ƒï¼Œ[Git ä¸‹è½½åœ°å€](https://git-scm.com/download/)

:::

::: details ä¸ºä»€ä¹ˆæ‰§è¡Œé¡¹ç›®åˆå§‹åŒ–ä¹‹åï¼Œå®‰è£…çš„ä¾èµ–ä¸æ˜¯æœ€æ–°çš„ï¼Ÿ

è¿™æ˜¯ **æ­£å¸¸ç°è±¡**ï¼ŒåŸå› ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š

------

âœ… **1. æ¨¡æ¿ä¾èµ–æ˜¯å›ºå®šç‰ˆæœ¬**

`npx degit dcloudio/uni-preset-vue#vite-ts` åªæ˜¯æŠŠ **GitHub ä»“åº“ä¸Šçš„æ¨¡æ¿ä»£ç ** ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨æ›´æ–°æ¨¡æ¿é‡Œçš„ `package.json` åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚

æ¨¡æ¿ä½œè€…ï¼ˆDCloudï¼‰ä¸ºäº†ä¿è¯**å…¼å®¹æ€§å’Œç¨³å®šæ€§**ï¼Œé€šå¸¸ä¼šï¼š

- åœ¨ `package.json` ä¸­å†™æ­»ç‰¹å®šç‰ˆæœ¬æˆ–ä½¿ç”¨ **å›ºå®šèŒƒå›´ï¼ˆ^ æˆ– ~ï¼‰**ã€‚
- é¿å…å› ä¸ºä¾èµ–å‡çº§å¯¼è‡´æ„å»ºå¤±è´¥ã€‚

------

âœ… **2. degit ä¸ä¼šå®‰è£…ä¾èµ–ï¼Œä¹Ÿä¸ä¼šæ£€æŸ¥æœ€æ–°ç‰ˆæœ¬**

`degit` çš„ä½œç”¨ï¼š

- **å¤åˆ¶ Git ä»“åº“æŸä¸ªåˆ†æ”¯/æ ‡ç­¾çš„æ–‡ä»¶**ã€‚
- å®ƒä¸ä¼šè¿è¡Œ `npm update`ï¼Œä¹Ÿä¸ä¼šè”ç³» npm registry è·å–æœ€æ–°ç‰ˆæœ¬ã€‚

å®‰è£…ä¾èµ–æ—¶ï¼ˆ`npm install` æˆ– `pnpm install`ï¼‰ï¼Œä¼šæ ¹æ® `package.json` å’Œ `package-lock.json` å®‰è£…ã€‚

- å¦‚æœæ¨¡æ¿å¸¦äº† `package-lock.json`ï¼Œé”å®šäº†ç‰ˆæœ¬ã€‚
- å¦‚æœæ¨¡æ¿æ²¡æœ‰ lock æ–‡ä»¶ï¼Œä½† `package.json` é‡ŒæŒ‡å®šäº†è€ç‰ˆæœ¬ï¼Œä»ä¼šå®‰è£…è€ç‰ˆæœ¬ã€‚

------

âœ… **3. uni-app å®˜æ–¹æ¨¡æ¿æ›´æ–°é¢‘ç‡**

DCloud çš„ uni-app å®˜æ–¹æ¨¡æ¿æ›´æ–°èŠ‚å¥ç›¸å¯¹æ…¢ï¼Œ**å¯èƒ½æ¨¡æ¿é‡Œä¾èµ–ç‰ˆæœ¬å·²ç»è½åäºæœ€æ–°çš„ Vite / Vue / TypeScript ç‰ˆæœ¬**ï¼Œå› ä¸ºï¼š

- uni-app éœ€è¦å…¼å®¹ Appã€å°ç¨‹åºç­‰å¹³å°ã€‚
- æ–°ç‰ˆ Vite æˆ– TS å¯èƒ½å¼•å…¥ breaking changesã€‚

------

âœ… **å¦‚ä½•è®©ä¾èµ–æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Ÿ**

æœ‰å‡ ç§æ–¹æ³•ï¼š

------

**âœ” æ–¹æ³• 1ï¼šç”¨ `npm-check-updates` æ›´æ–°ä¾èµ–**

å®‰è£… `npm-check-updates`ï¼ˆç®€ç§° ncuï¼‰ï¼š

```
npm install -g npm-check-updates
```

ç„¶ååœ¨é¡¹ç›®ç›®å½•è¿è¡Œï¼š

```
ncu -u
```

è¿™ä¼šæ›´æ–° `package.json` ä¸­çš„ä¾èµ–åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚

å†é‡æ–°å®‰è£…ï¼š

```
npm install
```

------

**âœ” æ–¹æ³• 2ï¼šæ‰‹åŠ¨ä¿®æ”¹ `package.json`**

- æŠŠä¸»è¦ä¾èµ–ï¼ˆ`vue`ã€`vite`ã€`typescript` ç­‰ï¼‰æ”¹æˆ `"latest"` æˆ– `^æœ€æ–°ç‰ˆæœ¬å·`ã€‚
- ç„¶åé‡æ–°æ‰§è¡Œ `npm install`ã€‚

------

**âœ” æ–¹æ³• 3ï¼šä½¿ç”¨ `pnpm` å¹¶æŒ‡å®šæœ€æ–°ä¾èµ–**

å¦‚æœä½ ç”¨ `pnpm`ï¼Œå¯ä»¥ç›´æ¥ï¼š

```
pnpm up --latest
```

ä¼šç›´æ¥æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚

------

âœ… **æ³¨æ„**

**æ›´æ–°åˆ°æœ€æ–°ä¾èµ–å¯èƒ½ä¼šå¯¼è‡´ uni-app ç›¸å…³æ’ä»¶ä¸å…¼å®¹**ï¼Œå°¤å…¶æ˜¯ï¼š

- `@dcloudio/uni-app`
- `@dcloudio/vite-plugin-uni`
- `vite`ã€`rollup` æ’ä»¶

æ‰€ä»¥ï¼š

- **å…ˆæ›´æ–°é uni-app æ ¸å¿ƒä¾èµ–**ï¼ˆæ¯”å¦‚ ESLintã€TypeScriptï¼‰ã€‚
- æ ¸å¿ƒä¾èµ–å»ºè®®è·Ÿ uni-app å®˜æ–¹æ¨èç‰ˆæœ¬èµ°ã€‚

:::

ä½¿ç”¨å‘½ä»¤è¡Œç¼–è¯‘å’Œè¿è¡Œ uni-app é¡¹ç›®

1. å®‰è£…ä¾èµ– `pnpm install`
2. ç¼–è¯‘æˆå¾®ä¿¡å°ç¨‹åº `pnpm dev:mp-weixin`
3. å¯¼å…¥å¾®ä¿¡å¼€å‘è€…å·¥å…·

::: tip æ¸©é¦¨æç¤º
ç¼–è¯‘æˆ H5 ç«¯å¯è¿è¡Œ `pnpm dev:h5` é€šè¿‡æµè§ˆå™¨é¢„è§ˆé¡¹ç›®ã€‚
:::

## ç”¨ VS Code å¼€å‘ uni-app é¡¹ç›®

### ä¸ºä»€ä¹ˆé€‰æ‹© VS Codeï¼Ÿ

- VS Code å¯¹ **TS ç±»å‹æ”¯æŒå‹å¥½**ï¼Œå‰ç«¯å¼€å‘è€…**ä¸»æµçš„ç¼–è¾‘å™¨**
- HbuilderX å¯¹ TS ç±»å‹æ”¯æŒæš‚ä¸å®Œå–„ï¼ŒæœŸå¾…å®˜æ–¹å®Œå–„ ğŸ‘€

### ä½¿ç”¨ VS Code å¼€å‘é…ç½®

- ğŸ‘‰ å‰ç½®å·¥ä½œï¼šå®‰è£… Vue3 æ’ä»¶ï¼Œ[ç‚¹å‡»æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/guide/typescript/overview.html#ide-support)
  - å®‰è£… **Vue Language Features (Volar)** ï¼šVue3 è¯­æ³•æç¤ºæ’ä»¶
  - å®‰è£… **TypeScript Vue Plugin (Volar)** ï¼šVue3+TS æ’ä»¶
  - **å·¥ä½œåŒºç¦ç”¨** Vue2 çš„ Vetur æ’ä»¶(Vue3 æ’ä»¶å’Œ Vue2 å†²çª)
  - **å·¥ä½œåŒºç¦ç”¨** @builtin typescript æ’ä»¶ï¼ˆç¦ç”¨åå¼€å¯ Vue3 çš„ TS æ‰˜ç®¡æ¨¡å¼ï¼‰
- ğŸ‘‰ å®‰è£… uni-app å¼€å‘æ’ä»¶
  - **uni-create-view** ï¼šå¿«é€Ÿåˆ›å»º uni-app é¡µé¢
  - **uni-helper uni-app** ï¼šä»£ç æç¤º
  - **uniapp å°ç¨‹åºæ‰©å±•** ï¼šé¼ æ ‡æ‚¬åœæŸ¥æ–‡æ¡£
- ğŸ‘‰ TS ç±»å‹æ ¡éªŒ
  - å®‰è£… **ç±»å‹å£°æ˜æ–‡ä»¶** `pnpm i -D miniprogram-api-typings @uni-helper/uni-app-types`
  - é…ç½® `tsconfig.json`
- ğŸ‘‰ JSON æ³¨é‡Šé—®é¢˜
  - è®¾ç½®æ–‡ä»¶å…³è”ï¼ŒæŠŠ `manifest.json` å’Œ `pages.json` è®¾ç½®ä¸º `jsonc`

`tsconfig.json` å‚è€ƒ

```json {11,12,14-15,18-22}
// tsconfig.json
{
  "extends": "@vue/tsconfig/tsconfig.json",
  "compilerOptions": {
    "sourceMap": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    },
    "lib": ["esnext", "dom"],
    // ç±»å‹å£°æ˜æ–‡ä»¶
    "types": [
      "@dcloudio/types", // uni-app API ç±»å‹
      "miniprogram-api-typings", // åŸç”Ÿå¾®ä¿¡å°ç¨‹åºç±»å‹
      "@uni-helper/uni-app-types" // uni-app ç»„ä»¶ç±»å‹
    ]
  },
  // vue ç¼–è¯‘å™¨ç±»å‹ï¼Œæ ¡éªŒæ ‡ç­¾ç±»å‹
  "vueCompilerOptions": {
    // åŸé…ç½® `experimentalRuntimeMode` ç°è°ƒæ•´ä¸º `nativeTags`
    "nativeTags": ["block", "component", "template", "slot"], // [!code ++]
    "experimentalRuntimeMode": "runtime-uni-app" // [!code --]
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"]
}
```

**å·¥ä½œåŒºè®¾ç½®å‚è€ƒ**

```json
// .vscode/settings.json
{
  // åœ¨ä¿å­˜æ—¶æ ¼å¼åŒ–æ–‡ä»¶
  "editor.formatOnSave": true,
  // æ–‡ä»¶æ ¼å¼åŒ–é…ç½®
  "[json]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  // é…ç½®è¯­è¨€çš„æ–‡ä»¶å…³è”
  "files.associations": {
    "pages.json": "jsonc", // pages.json å¯ä»¥å†™æ³¨é‡Š
    "manifest.json": "jsonc" // manifest.json å¯ä»¥å†™æ³¨é‡Š
  }
}
```

::: danger ç‰ˆæœ¬å‡çº§

- åŸä¾èµ– `@types/wechat-miniprogram` ç°è°ƒæ•´ä¸º [miniprogram-api-typings](https://github.com/wechat-miniprogram/api-typings)ã€‚
- åŸé…ç½® `experimentalRuntimeMode` ç°è°ƒæ•´ä¸º `nativeTags`ã€‚

:::

### é’ˆå¯¹ jsonc æ³¨é‡Šé—®é¢˜çš„è¡¥å……

::: details ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

æœ€ä½³å®è·µé…ç½®ï¼š

```ts
import js from '@eslint/js'
import globals from 'globals'
import tseslint from 'typescript-eslint'
import pluginVue from 'eslint-plugin-vue'
import json from '@eslint/json'
import markdown from '@eslint/markdown'
import css from '@eslint/css'
import { defineConfig } from 'eslint/config'

// import skipFormatting from '@vue/eslint-config-prettier/skip-formatting'
import eslintConfigPrettier from 'eslint-config-prettier/flat'

import eslintPluginPrettierRecommended from 'eslint-plugin-prettier/recommended'

// æä¾› JSON/JSONC çš„è§„åˆ™é›†åˆ
import pluginJsonc from 'eslint-plugin-jsonc'
// æä¾› JSONC è§£æå™¨ - è®© ESLint èƒ½è§£æ //ã€/* */ æ³¨é‡Šã€å°¾é€—å·ç­‰ JSONC è¯­æ³•
import jsoncParser from 'jsonc-eslint-parser'

export default defineConfig([
  // é¦–å…ˆæ·»åŠ å¿½ç•¥æ¨¡å¼ - é˜²æ­¢é Vue æ–‡ä»¶è¢« Vue è§„åˆ™å¤„ç†
  {
    ignores: [
      'dist/**',
      'node_modules/**',
      'unpackage/**',
      '**/*.md',
      '**/*.css',
    ],
  },

  {
    files: ['**/*.{js,mjs,cjs,ts,mts,cts,vue}'],
    plugins: { js },
    extends: ['js/recommended'],
    languageOptions: { globals: { ...globals.browser, ...globals.node } },
  },
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  ...(tseslint.configs.recommended as any),

  pluginVue.configs['flat/essential'],
  {
    files: ['**/*.vue'],
    languageOptions: { parserOptions: { parser: tseslint.parser } },
  },
  {
    files: ['**/*.json', '**/*.jsonc', '**/*.json5'],
    languageOptions: {
      parser: jsoncParser, // å…³é”®ï¼šå¿…é¡»æ˜¾å¼æŒ‡å®š JSONC è§£æå™¨
    },
    // ----------- ç›®å‰æ²¡æœ‰å‘ç°è¿™æ®µæœ‰ä»€ä¹ˆå¤ªå¤§è½¯ç”¨ ------------------
    plugins: { jsonc: pluginJsonc },
    // plugin:jsonc/recommended-with-jsonc æ˜¯ eslint-plugin-jsonc æ’ä»¶å†…éƒ¨æä¾›çš„é¢„è®¾è§„åˆ™é›†
    // ä¹Ÿå°±æ˜¯ä¸€ä¸ªâ€œå®˜æ–¹æ¨èçš„ JSONC é…ç½®â€ï¼Œä¸“é—¨ç”¨äºè§£æ å…è®¸æ³¨é‡Šå’Œå°¾é€—å·çš„ JSONC æ–‡ä»¶
    // äº‹å®ä¸Š eslint --fix . æ ¹æœ¬æ— æ³•è¯†åˆ«ä¸‹é¢è¿™è¡Œé…ç½®,æ‰¾ä¸åˆ°, å†™æ³•è¢«åºŸå¼ƒäº†
    // extends: ['plugin:jsonc/recommended-with-jsonc'],
    rules: {
      // ç›´æ¥ä» eslint-plugin-jsonc æ’ä»¶ä¸­è·å–æ¨èè§„åˆ™é›†ï¼Œå¹¶æŒ‰éœ€è¦†ç›–å…³é”®é¡¹ï¼Œé¿å…ä½¿ç”¨åºŸå¼ƒçš„ extends è¯­æ³•
      // ...pluginJsonc.configs['recommended-with-jsonc'].rules,
      'jsonc/no-comments': 'off', // å…è®¸æ³¨é‡Š
      'jsonc/comma-style': ['error', 'last'], // è¿™ä¸ªè§„åˆ™åªæ§åˆ¶é€—å·çš„ä½ç½®ï¼ˆæ¯”å¦‚åœ¨å¤šè¡Œæ•°ç»„/å¯¹è±¡é‡Œï¼Œé€—å·åœ¨è¡Œå°¾è¿˜æ˜¯è¡Œé¦–ï¼‰
      'jsonc/no-dupe-keys': 'error', // ç¦æ­¢é‡å¤ key
      'jsonc/valid-json-number': 'error', // æ•°å­—åˆæ³•æ€§æ ¡éªŒ
    },
    // ----------- ç›®å‰æ²¡æœ‰å‘ç°è¿™æ®µæœ‰ä»€ä¹ˆå¤ªå¤§è½¯ç”¨ end ------------------
  },
  {
    files: ['**/*.md'],
    plugins: { markdown },
    language: 'markdown/commonmark',
    extends: ['markdown/recommended'],
  },
  {
    files: ['**/*.css'],
    plugins: { css },
    language: 'css/css',
    extends: ['css/recommended'],
  },

  eslintConfigPrettier,
  // å…¶ä¸­åŒ…å«æ¨èé…ç½®
  eslintPluginPrettierRecommended,
  // skipFormatting,
])
```

è¿™æ ·çš„ç»“æœï¼Œä¼šå¯¼è‡´ eslint æ¥ç®¡æ‰€æœ‰ json æ–‡ä»¶çš„é£æ ¼å’Œæ ¼å¼åŒ–ï¼Œå› æ­¤éœ€è¦ï¼š

```ts
// settings.json
{
  // ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–
  "editor.formatOnSave": true,
  // å¯ç”¨ ESLint Flat Config
  "eslint.useFlatConfig": true,
  // "editor.defaultFormatter": "dbaeumer.vscode-eslint",
  // æ–‡ä»¶æ ¼å¼åŒ–é…ç½®
  "[json]": {
    // "editor.defaultFormatter": "vscode.json-language-features"
    // ä½†å®é™…ä¸Šï¼Œå› ä¸º eslint.validate ä¸åŒ…å« jsonï¼ŒESLint ä¸ä¼šå¤„ç†æ™®é€š JSON æ–‡ä»¶
    // æ‰€ä»¥ä¿å­˜æ—¶ä¼šå›é€€åˆ° VSCode å†…ç½®çš„ JSON æ ¼å¼åŒ–å™¨
    // "editor.defaultFormatter": "dbaeumer.vscode-eslint"
  },
  "[jsonc]": {
    // "editor.defaultFormatter": "vscode.json-language-features",
    "editor.defaultFormatter": "dbaeumer.vscode-eslint", // [!code ++]
    // ç¼©è¿›æ•ˆæœæœ€ç»ˆå–å†³äº ESLint/Prettierï¼Œè€Œä¸æ˜¯ tabSize
    "editor.tabSize": 4,
    "editor.insertSpaces": true
  },
  // ESLint æ ¡éªŒèŒƒå›´
  "eslint.validate": ["javascript", "vue", "jsonc"], // [!code ++]
  // é…ç½®è¯­è¨€çš„æ–‡ä»¶å…³è”
  "files.associations": { // [!code ++]
    "pages.json": "jsonc", // [!code ++]
    "manifest.json": "jsonc" // [!code ++]
  } // [!code ++]
}
```

å…¶ä¸­ï¼š

```json
"files.associations": {
  "pages.json": "jsonc",
  "manifest.json": "jsonc"
}
```

ä½œç”¨ï¼šå‘Šè¯‰ VSCode å°†è¿™ä¸¤ä¸ª JSON æ–‡ä»¶å½“ä½œ JSONC ç±»å‹å¤„ç†

::: details è®© ESLint çœŸæ­£è¯†åˆ« JSONC/å¸¦æ³¨é‡Šçš„ JSON çš„å®Œæ•´æ­¥éª¤

æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–

```
pnpm add -D eslint-plugin-jsonc jsonc-eslint-parser
```

- **eslint-plugin-jsonc**ï¼šæä¾› JSON/JSONC çš„è§„åˆ™é›†åˆ
- **jsonc-eslint-parser**ï¼šè®© ESLint èƒ½è§£æ `//`ã€`/* */` æ³¨é‡Šã€å°¾é€—å·ç­‰ JSONC è¯­æ³•

------

æ­¥éª¤ 2ï¼šé…ç½® ESLint

A)  **Flat Config**ï¼ˆ`eslint.config.js` / `eslint.config.mjs`ï¼‰

å¢åŠ æ ¸å¿ƒä»£ç ï¼š

```ts
// æä¾› JSON/JSONC çš„è§„åˆ™é›†åˆ
import pluginJsonc from 'eslint-plugin-jsonc'
// æä¾› JSONC è§£æå™¨ - è®© ESLint èƒ½è§£æ //ã€/* */ æ³¨é‡Šã€å°¾é€—å·ç­‰ JSONC è¯­æ³•
import jsoncParser from 'jsonc-eslint-parser'

{
  files: ['**/*.json', '**/*.jsonc', '**/*.json5'],
  languageOptions: {
    parser: jsoncParser, // å…³é”®ï¼šå¿…é¡»æ˜¾å¼æŒ‡å®š JSONC è§£æå™¨
  },
  // ----------- ç›®å‰æ²¡æœ‰å‘ç°è¿™æ®µæœ‰ä»€ä¹ˆå¤ªå¤§è½¯ç”¨ ------------------
  plugins: { jsonc: pluginJsonc },
  // plugin:jsonc/recommended-with-jsonc æ˜¯ eslint-plugin-jsonc æ’ä»¶å†…éƒ¨æä¾›çš„é¢„è®¾è§„åˆ™é›†
  // ä¹Ÿå°±æ˜¯ä¸€ä¸ªâ€œå®˜æ–¹æ¨èçš„ JSONC é…ç½®â€ï¼Œä¸“é—¨ç”¨äºè§£æ å…è®¸æ³¨é‡Šå’Œå°¾é€—å·çš„ JSONC æ–‡ä»¶
  // äº‹å®ä¸Š eslint --fix . æ ¹æœ¬æ— æ³•è¯†åˆ«ä¸‹é¢è¿™è¡Œé…ç½®,æ‰¾ä¸åˆ°, å†™æ³•è¢«åºŸå¼ƒäº†
  // extends: ['plugin:jsonc/recommended-with-jsonc'],
  rules: {
    // ç›´æ¥ä» eslint-plugin-jsonc æ’ä»¶ä¸­è·å–æ¨èè§„åˆ™é›†ï¼Œå¹¶æŒ‰éœ€è¦†ç›–å…³é”®é¡¹ï¼Œé¿å…ä½¿ç”¨åºŸå¼ƒçš„ extends è¯­æ³•
    // ...pluginJsonc.configs['recommended-with-jsonc'].rules,
    'jsonc/no-comments': 'off', // å…è®¸æ³¨é‡Š
    'jsonc/comma-style': ['error', 'last'], // è¿™ä¸ªè§„åˆ™åªæ§åˆ¶é€—å·çš„ä½ç½®ï¼ˆæ¯”å¦‚åœ¨å¤šè¡Œæ•°ç»„/å¯¹è±¡é‡Œï¼Œé€—å·åœ¨è¡Œå°¾è¿˜æ˜¯è¡Œé¦–ï¼‰
    'jsonc/no-dupe-keys': 'error', // ç¦æ­¢é‡å¤ key
    'jsonc/valid-json-number': 'error', // æ•°å­—åˆæ³•æ€§æ ¡éªŒ
  },
  // ----------- ç›®å‰æ²¡æœ‰å‘ç°è¿™æ®µæœ‰ä»€ä¹ˆè½¯ç”¨ end ------------------
},
```

> eslint åˆå§‹åŒ–é…ç½®æ–‡ä»¶å½“ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ `@eslint/json` æ’ä»¶ï¼š
>
> ```ts
>   {
>     files: ['**/*.json'],
>     plugins: { json },
>     language: 'json/json',
>     extends: ['json/recommended'],
>   },
>   {
>     files: ['**/*.jsonc'],
>     plugins: { json },
>     language: 'json/jsonc',
>     extends: ['json/recommended'],
>     rules: {
>       'jsonc/no-comments': 'off',
>     },
>   },
>   {
>     files: ['**/*.json5'],
>     plugins: { json },
>     language: 'json/json5',
>     extends: ['json/recommended'],
>   },
> ```
>
> å®ƒæ˜¯ **çº¯ JSON è§£æ**ï¼Œå¹¶ä¸æ”¯æŒæ³¨é‡Šã€‚æ“ä½œæ—¶éœ€è¦é¦–å…ˆå°†ä»¥ä¸Šéƒ¨åˆ†æ³¨é‡Šæˆ–åˆ é™¤ï¼Œå¦åˆ™ï¼š
>
> è¿™ä¸¤ç»„é…ç½®å­˜åœ¨ **é‡å **ï¼Œå®¹æ˜“å¯¼è‡´è§£æå†²çªï¼š
>   
>   - JSONC æ–‡ä»¶ï¼šè¢« `@eslint/json`ï¼ˆä¸æ”¯æŒæ³¨é‡Šï¼‰å’Œ `jsonc-eslint-parser`ï¼ˆæ”¯æŒæ³¨é‡Šï¼‰åŒæ—¶æ¥ç®¡ â†’ âš ï¸ æ³¨é‡ŠæŠ¥é”™
>    
>    âœ… å»ºè®®ï¼š
>    
>    - å¦‚æœä½ åªæƒ³è¦ JSONCï¼ˆæ”¯æŒæ³¨é‡Šï¼‰ï¼Œå¯ä»¥ç›´æ¥åˆ æ‰ã€‚

------

B) **ä¼ ç»Ÿ .eslintrc**ï¼ˆ`.eslintrc.js` / `.eslintrc.cjs` / `.eslintrc.json`ï¼‰

ï¼ˆæš‚æœªè¸©å‘å®æµ‹ï¼Œä»…ä¾›å‚è€ƒï¼‰

```
// .eslintrc.js
module.exports = {
  // ...ä½ çš„åŸæœ‰é…ç½®
  plugins: ['jsonc'],
  overrides: [
    {
      files: ['*.json', '*.jsonc', '*.json5'],
      parser: 'jsonc-eslint-parser',
      rules: {
        // å¦‚æœä½ æƒ³ç›´æ¥ç”¨æ¨èè§„åˆ™ï¼š
        // extends åœ¨ overrides é‡Œä¸èƒ½ç”¨ï¼Œå–è€Œä»£ä¹‹å¯æ‰‹åŠ¨å¤åˆ¶æ¨èè§„åˆ™ï¼Œæˆ–åœ¨æ ¹çº§ extendsï¼š
        // extends: ['plugin:jsonc/recommended-with-jsonc'],

        'jsonc/no-comments': 'off',
        'jsonc/no-dupe-keys': 'error',
        'jsonc/valid-json-number': 'error',
        // 'jsonc/sort-keys': ['warn', { pathPattern: '.*', order: { type: 'asc' } }],
      },
    },
  ],
  extends: [
    // å¦‚æœä½ å¸Œæœ›åœ¨æ ¹çº§ä¸€æ¬¡æ€§å¯ç”¨ JSONC æ¨èè§„åˆ™ï¼ˆæ›´çœäº‹ï¼‰ï¼š
    // 'plugin:jsonc/recommended-with-jsonc',
  ],
}
```

------

æ­¥éª¤ 3ï¼šé…ç½® settings.json è®© VS Code æ­£ç¡®æ ¡éªŒ & æ­£ç¡®æ ¼å¼åŒ–

- **è®© ESLint æ’ä»¶å»æ ¡éªŒ JSON/JSONC æ–‡ä»¶**ï¼ˆå¯é€‰ä½†æ¨èï¼‰
   åœ¨ä½ çš„ VS Code `settings.json` ä¸­åŠ å…¥/ç¡®è®¤ï¼š

```json
{
  // ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–
  "editor.formatOnSave": true,
  // å¯ç”¨ ESLint Flat Config
  "eslint.useFlatConfig": true,
  // æ–‡ä»¶æ ¼å¼åŒ–é…ç½®
  "[json]": {
    "editor.defaultFormatter": "vscode.json-language-features"
  },
  "[jsonc]": {
    "editor.defaultFormatter": "vscode.json-language-features",
    "editor.tabSize": 4,
    "editor.insertSpaces": true
  },
  // ESLint æ ¡éªŒèŒƒå›´
  "eslint.validate": [
    "javascript",
    "vue",
    "jsonc"
  ],
  // é…ç½®è¯­è¨€çš„æ–‡ä»¶å…³è”
  "files.associations": {
    "pages.json": "jsonc",
    "manifest.json": "jsonc"
  }
}
```



:::

:::

::: details eslint flat config - æ·±å…¥é—®é¢˜æ€»ç»“

defineConfig å’Œç›´æ¥å¡«å†™æ•°ç»„é…ç½®é¡¹ä¹‹é—´æœ‰ä¸€äº›åŒºåˆ«ï¼ŒåŠ è½½é¡ºåºã€æ‰§è¡Œæ—¶æœºï¼Œç±»å‹æ¨èå¾ˆå¤šæ–¹é¢çš„åŒºåˆ«  /

åœ¨ **Flat Config** ä¸­å†™äº†ï¼š

```
extends: ['plugin:jsonc/recommended-with-jsonc']
```

ç„¶å ESLint  å°±ä¼šæŠ¥ï¼š

```
Plugin "plugin:jsonc" not found
```

è€Œé¡¹ç›®ä¾èµ–é‡Œç¡®å®æœ‰ `eslint-plugin-jsonc`ã€‚

è¿™æ˜¯ **Flat Config + å†…ç½® `extends` è§„åˆ™è¯†åˆ«æ–¹å¼** çš„ä¸€ä¸ªå·²çŸ¥å‘ï¼š

- åœ¨ Flat Config ä¸­ï¼Œ`extends: ['plugin:jsonc/...']` è¿™ç§æ—§å¼å‘½åæ–¹å¼ **ä¸å†è¢«è‡ªåŠ¨è§£ææ’ä»¶**ï¼Œå› ä¸º Flat Config ç›´æ¥ä½¿ç”¨ **æ’ä»¶å¯¹è±¡** è€Œä¸æ˜¯å­—ç¬¦ä¸²å¼•ç”¨ã€‚
- æ‰€ä»¥ ESLint æ‰¾ä¸åˆ° `"plugin:jsonc"`ï¼ŒæŠ¥æ’ä»¶ä¸å­˜åœ¨ã€‚

------

æ­£ç¡®çš„åšæ³•ï¼ˆFlat Configï¼‰

1. **ä¸è¦ä½¿ç”¨ `extends: ['plugin:jsonc/recommended-with-jsonc']` å­—ç¬¦ä¸²**ã€‚
2. ç›´æ¥åœ¨ Flat Config ä¸­å¼•ç”¨æ’ä»¶çš„é…ç½®å¯¹è±¡ï¼š

```
{
  files: ['pages.json', 'manifest.json'],
  plugins: { jsonc: pluginJsonc },
  languageOptions: {
    parser: jsoncParser, // å…³é”®ï¼šå¿…é¡»æ˜¾å¼æŒ‡å®š JSONC è§£æå™¨
  },
  rules: {
    ...pluginJsonc.configs['recommended-with-jsonc'].rules,
    'jsonc/no-comments': 'off',        // å…è®¸æ³¨é‡Š
    'jsonc/comma-style': ['error', 'last'], // è‡ªåŠ¨ä¿®å¤å°¾éšé€—å·
    'jsonc/no-dupe-keys': 'error',     // ç¦æ­¢é‡å¤ key
    'jsonc/valid-json-number': 'error' // æ•°å­—åˆæ³•æ€§æ ¡éªŒ
  },
}
```

âœ… è¿™æ ·åšå¯ä»¥ï¼š

- ä¿ç•™ manifest.json çš„æ³¨é‡Šå’Œ JSONC ç‰¹æ€§
- Flat Config æ­£ç¡®è¯†åˆ«æ’ä»¶ï¼Œä¸æŠ¥ â€œplugin not foundâ€

------

æ³¨æ„

- **ä¸è¦åŒæ—¶ä½¿ç”¨** `extends: ['plugin:jsonc/recommended-with-jsonc']`ï¼ŒFlat Config ä¸‹ä¼šå¯¼è‡´ `Plugin not found`ã€‚
- `...pluginJsonc.configs['recommended-with-jsonc'].rules` å·²ç»åŒ…å«å¤§éƒ¨åˆ†è§„åˆ™ï¼Œé…åˆ `parser: jsoncParser` å°±è¶³å¤Ÿäº†ã€‚

å…¶ä¸­ï¼š

```
...pluginJsonc.configs['recommended-with-jsonc'].rules,
```

ä½†æ˜¯å³ä½¿æŠŠè¿™æ®µæ³¨é‡Šæ‰ï¼Œ`jsonc` æ–‡ä»¶çš„æ³¨é‡Šå…è®¸ã€é‡å¤ key æ ¡éªŒä¾æ—§ç”Ÿæ•ˆ â†’ è¯´æ˜å…¶å®æ ¹æœ¬ä¸æ˜¯ä½ è¿™é‡Œçš„ `rules` åœ¨æ¥ç®¡ï¼Œè€Œæ˜¯ **ESLint é»˜è®¤å°±å·²ç»å¥—ç”¨äº† JSONC æ’ä»¶çš„è§„åˆ™**ã€‚

è¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿæ¢³ç†ä¸€ä¸‹åŸå›  ğŸ‘‡

------

1. `eslint-plugin-jsonc` è‡ªå¸¦äº†é»˜è®¤é…ç½®

å¦‚æœä½ åœ¨é¡¹ç›®é‡Œå®‰è£…äº† `eslint-plugin-jsonc`ï¼Œå¹¶ä¸”æœ‰ `eslint.config.js` æˆ– `flat config` æ¨¡å¼ï¼Œ**åªè¦ ESLint è§£æåˆ° JSON/JSONC æ–‡ä»¶ï¼Œå°±ä¼šè‡ªåŠ¨åº”ç”¨è¿™ä¸ªæ’ä»¶çš„é»˜è®¤é…ç½®**ã€‚
 ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä¾¿ä½ æ²¡å†™ `rules`ï¼Œ`jsonc/no-dupe-keys`ã€`jsonc/no-comments` ç­‰è§„åˆ™å°±ä¼šç”Ÿæ•ˆã€‚

------

2. ä½ å†™çš„ `rules` éƒ¨åˆ†å…¶å®æ˜¯ **è¦†ç›–å±‚**

```
rules: {
  ...pluginJsonc.configs['recommended-with-jsonc'].rules,
  'jsonc/no-comments': 'off',
}
```

è¿™è¡Œä»£ç åªæ˜¯**åœ¨æ’ä»¶çš„é»˜è®¤è§„åˆ™ä¹‹ä¸Šå†è¦†ç›–ä¸€é**ã€‚
 æ‰€ä»¥ä½ æŠŠå®ƒæ³¨é‡Šæ‰ï¼Œä¸å½±å“ `jsonc/no-comments`ï¼Œå› ä¸ºé»˜è®¤é…ç½®é‡Œå·²ç»å…è®¸ JSONC æ³¨é‡Šäº†ã€‚

------

3. ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§ã€Œçœ‹ä¼¼æ— æ•ˆã€çš„æ„Ÿè§‰ï¼Ÿ

å› ä¸º JSON/JSONC æ–‡ä»¶ä¸€æ—¦è¢« `jsonc-eslint-parser` è§£æå™¨è¯†åˆ«ï¼Œ`eslint-plugin-jsonc` é»˜è®¤çš„ ruleset å°±ç”Ÿæ•ˆã€‚
 å¦‚æœä½ æ²¡æœ‰æ˜¾å¼å…³æ‰é»˜è®¤è§„åˆ™ï¼ˆä¾‹å¦‚ `rules: { 'jsonc/no-dupe-keys': 'off' }`ï¼‰ï¼Œå®ƒä¾æ—§ä¼šæŠ¥é”™ã€‚

------

âœ… **éªŒè¯æ–¹æ³•**
 ä½ å¯ä»¥åœ¨ `eslint.config.js` ä¸­åŠ ä¸€æ¡ï¼š

```
{
  files: ['**/*.json', '**/*.jsonc', '**/*.json5'],
  rules: {
    'jsonc/no-dupe-keys': 'off', // æ˜¾å¼å…³é—­
  }
}
```

ç„¶ååœ¨ `manifest.jsonc` é‡Œå†™ä¸¤ä¸ªç›¸åŒçš„ keyï¼Œçœ‹çœ‹æ˜¯å¦è¿˜ä¼šæŠ¥é”™ã€‚
 å¦‚æœä¸æŠ¥é”™ï¼Œè¯´æ˜è§„åˆ™ç¡®å®è¢«ä½ æ¥ç®¡ï¼›å¦‚æœä¾ç„¶æŠ¥é”™ï¼Œé‚£å°±æ˜¯é…ç½®åŠ è½½æ–¹å¼æœ‰é—®é¢˜ã€‚

------

ğŸ‘‰ æ‰€ä»¥æ€»ç»“ä¸‹æ¥ï¼š

- ä½ çœ‹åˆ°ã€Œå³ä½¿æ³¨é‡Šæ‰ `rules` ä¹Ÿæœ‰æ•ˆã€ï¼Œæ˜¯å› ä¸ºæ’ä»¶ **é»˜è®¤è§„åˆ™å·²ç»å¯ç”¨äº†**ã€‚
- ä½ å†™çš„ `rules`ï¼Œåªæ˜¯åœ¨é»˜è®¤åŸºç¡€ä¸Šåšã€ŒäºŒæ¬¡è¦†ç›–ã€ã€‚
- æƒ³ç¡®è®¤æ˜¯å¦æ¥ç®¡ï¼Œåªè¦è¯•ç€ `off` æ‰æŸä¸ªé»˜è®¤è§„åˆ™ï¼Œå°±èƒ½ç«‹åˆ»çœ‹å‡ºæ¥ã€‚

:::

### settings.jsonå½“ä¸­ vscode.json-language-features VS dbaeumer.vscode-eslint

::: details - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

å…¶ä¸­ï¼Œ**`"editor.defaultFormatter": "vscode.json-language-features"`**

- åªè°ƒç”¨ VSCode å†…ç½®çš„ JSON/JSONC æ ¼å¼åŒ–å™¨ã€‚
- æ ¼å¼åŒ–è¡Œä¸ºå±€é™äºç¼©è¿›ã€å¯¹é½å’Œç®€å•ç©ºæ ¼è°ƒæ•´ã€‚
- **ä¸ä¼šè§¦å‘ ESLint è§„åˆ™**ï¼Œæ‰€ä»¥ `jsonc/comma-style`ã€`jsonc/no-dupe-keys` ç­‰è§„åˆ™ä¸ä¼šç”Ÿæ•ˆã€‚

`"editor.defaultFormatter": "vscode.json-language-features"` **åªè°ƒç”¨ VSCode å†…ç½®çš„ JSON/JSONC æ ¼å¼åŒ–å™¨**ï¼Œä½œç”¨ä»…é™äºï¼š

- è‡ªåŠ¨ç¼©è¿›
- å¯¹é½ key-value
- å¯¹æ³¨é‡Šçš„åŸºæœ¬æ ¼å¼åŒ–ï¼ˆJSONCï¼‰

VSCode å†…ç½® JSON/JSONC æ ¼å¼åŒ–å™¨é»˜è®¤è¡Œä¸ºï¼Œå¼ºåˆ¶æ–‡ä»¶ä»¥å•è¡Œç»“å°¾ï¼Œä¸ä¾èµ– ESLintã€‚

å®ƒ **ä¸ä¼šè§¦å‘ ESLint**ï¼Œä¹Ÿä¸ä¼šæ‰§è¡Œä»»ä½• ESLint è§„åˆ™ï¼Œä½†æœ‰ä¸€ç‚¹éœ€è¦éœ€è¦æ³¨æ„ï¼ŒPrettier å¯¹ JSON / JSONC æ–‡ä»¶çš„æç¤ºæ˜¯ **ç‹¬ç«‹çš„**ï¼Œå¹¶ä¸ä¾èµ– ESLintï¼Œå› æ­¤ï¼šå½“é…ç½®ä¸º"editor.defaultFormatter": "vscode.json-language-features"æ—¶ï¼ŒPrettier ä¼šç‹¬ç«‹æç¤º JSON æ ¼å¼é—®é¢˜ã€‚

è¿™æ ·é…ç½®æ„å‘³ç€ï¼Œä¿å­˜æ—¶ VSCode å†…ç½® JSON/JSONC æ ¼å¼åŒ–å™¨é‡æ–°æ ¼å¼åŒ– â†’ è‡ªåŠ¨åˆ é™¤å¤šä½™ç©ºè¡Œï¼Œåˆ é™¤åå³å‡ºç°ä¸prettierçš„å†²çªï¼Œå› ä¸ºprettieræœ«å°¾ç©ºè¡Œã€‚

åªæœ‰è®¾ç½®ï¼Œ **`"editor.defaultFormatter": "dbaeumer.vscode-eslint"` **å¹¶ä¸” ESLint é…ç½®æ­£ç¡®æ—¶ï¼Œä¿å­˜æ‰ä¼šè§¦å‘ `eslint --fix`ï¼Œå¯¹ JSONC æ–‡ä»¶æ‰§è¡Œ ESLint è§„åˆ™ä¿®å¤ã€‚

åœ¨ VSCode ä¸­ï¼Œ`"editor.defaultFormatter": "dbaeumer.vscode-eslint"` çš„æ„æ€æ˜¯ï¼š

- **æŒ‡å®šé»˜è®¤çš„ä»£ç æ ¼å¼åŒ–å™¨**ä¸º ESLint æ’ä»¶ï¼ˆç”± `dbaeumer.vscode-eslint` æä¾›ï¼‰ã€‚
- å½“ä½ æ‰§è¡Œ **â€œä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–â€** æˆ–æ‰‹åŠ¨è§¦å‘ **æ ¼å¼åŒ–å‘½ä»¤** æ—¶ï¼ŒVSCode ä¼šè°ƒç”¨ ESLint æ¥å¯¹å½“å‰æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–ã€‚
- è¿™ä¸ªæ ¼å¼åŒ–å™¨ **ä¼šä¾æ® ESLint è§„åˆ™æ‰§è¡Œä¿®å¤**ï¼Œä¹Ÿå°±æ˜¯ç­‰æ•ˆäºæ‰§è¡Œ `eslint --fix`ï¼š
  - å»æ‰å°¾éšé€—å·
  - è°ƒæ•´ç¼©è¿›ã€ç©ºæ ¼
  - ä¿®å¤ ESLint å…è®¸è‡ªåŠ¨ä¿®å¤çš„è§„åˆ™

âš ï¸ æ³¨æ„ï¼š

- å®ƒ**ä¸ä¼šè¦†ç›– VSCode å†…ç½®æ ¼å¼åŒ–å™¨**çš„åŠŸèƒ½ï¼Œä½†ä¼šä¼˜å…ˆä½¿ç”¨ ESLint è§„åˆ™è¿›è¡Œä¿®å¤ã€‚
- å¿…é¡»ä¿è¯å½“å‰æ–‡ä»¶ç±»å‹åœ¨ ESLint æ ¡éªŒèŒƒå›´å†…ï¼ˆ`eslint.validate` é…ç½®æ­£ç¡®ï¼‰å¹¶ä¸” ESLint é…ç½®ä¸­æœ‰å¯è‡ªåŠ¨ä¿®å¤çš„è§„åˆ™ï¼Œå¦åˆ™æ ¼å¼åŒ–ä¸ä¼šç”Ÿæ•ˆã€‚

æ¢å¥è¯è¯´ï¼š

> åªè¦ä¿å­˜æ—¶ ESLint è§„åˆ™ä¸­æœ‰å¯è‡ªåŠ¨ä¿®å¤çš„é¡¹ï¼ˆä¾‹å¦‚ `jsonc/comma-style`ï¼‰ï¼Œè®¾ç½® `"editor.defaultFormatter": "dbaeumer.vscode-eslint"` å°±èƒ½ç›´æ¥æŠŠå°¾éšé€—å·ç­‰é—®é¢˜ä¿®å¤æ‰ï¼Œæ— éœ€æ‰‹åŠ¨æ‰§è¡Œ `eslint --fix`ã€‚

(å¹¶ä¸”ï¼Œå®æµ‹æ— æ³•å®ç°é’ˆå¯¹jsoncæ–‡ä»¶çš„ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œchatgpt æç¤ºéœ€è¦æ‰‹åŠ¨ eslint --fix è§¦å‘è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œæˆªè‡³ç›®å‰æ²¡æœ‰å®æµ‹..)

**ESLint é…ç½®ä¸­çš„ JSONC block**

```
{
  files: ['pages.json', 'manifest.json'],
  plugins: { json: pluginJsonc },
  languageOptions: { parser: jsoncParser },
  extends: ['plugin:jsonc/recommended-with-jsonc'],
  rules: {
    'jsonc/no-comments': 'off',
    'jsonc/comma-style': ['error', 'last'],
  },
}
```

- ç”± ESLint æ’ä»¶ç®¡ç† JSONC æ–‡ä»¶çš„è§„åˆ™ã€‚
- **å¯ä»¥æ£€æµ‹å°¾éšé€—å·ã€é‡å¤ keyã€æ³¨é‡Šåˆæ³•æ€§ç­‰**ï¼Œå¹¶åœ¨æ‰§è¡Œ `eslint --fix` æˆ– `"editor.defaultFormatter": "dbaeumer.vscode-eslint"` æ—¶è‡ªåŠ¨ä¿®å¤ã€‚

:::



### VSCode å†…ç½® JSON æ ¼å¼åŒ–å™¨ + Prettier æ’ä»¶çš„äº¤äº’é—®é¢˜

::: details - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

æ¢³ç†ä¸€ä¸‹åŸå› å’ŒåŸç†ï¼š

------

1ï¸âƒ£ å°¾éšé€—å·è‡ªåŠ¨åˆ é™¤

- **åŸå› **ï¼šJSONï¼ˆä»¥åŠ JSONCï¼‰æœ¬èº«è§„èŒƒä¸å…è®¸å°¾éšé€—å·ã€‚
- **æ‰§è¡Œè€…**ï¼š
  - **VSCode å†…ç½® `json-language-features` æ ¼å¼åŒ–å™¨**
  - æˆ–è€… **Prettier**ï¼ˆå¦‚æœå®ƒè¢«é…ç½®ä¸ºæ ¼å¼åŒ– JSONï¼‰ã€‚
- **ç»“æœ**ï¼šä¿å­˜æ—¶ï¼Œå°¾éšé€—å·è¢«è‡ªåŠ¨åˆ æ‰ï¼Œæ— è®º ESLint è§„åˆ™æ€ä¹ˆå†™ï¼Œéƒ½æ— æ•ˆï¼Œå› ä¸ºè¿™æ˜¯ **formatter** çš„è¡Œä¸ºï¼Œä¸æ˜¯ ESLintã€‚

------

2ï¸âƒ£ æœ«å°¾ç©ºè¡Œä¸è‡ªåŠ¨åˆ é™¤

- **åŸå› **ï¼š
  - **VSCode å†…ç½® JSON æ ¼å¼åŒ–å™¨**ä¸ä¼šå¤„ç†æ–‡ä»¶æœ«å°¾ç©ºè¡Œï¼Œå®ƒåªä¿è¯ JSON æ ¼å¼åˆæ³•å’Œç¼©è¿›ä¸€è‡´ã€‚
  - **Prettier**æœ¬èº«ä¼šå¯¹ JSON æ–‡ä»¶çš„æœ«å°¾ç©ºè¡Œæœ‰è§„åˆ™ï¼ˆ`endOfLine` æˆ– `insert_final_newline`ï¼‰ï¼Œä½†æ˜¯ **å¦‚æœ VSCode æ²¡æœ‰è®© Prettier æ¥ç®¡ä¿å­˜æ ¼å¼åŒ–**ï¼Œå°±ä¸ä¼šæ‰§è¡Œã€‚
- **ç°è±¡**ï¼š
  - å¢åŠ ç©ºè¡Œæ—¶ï¼ŒPrettier æŠ¥å‘Šæœ«å°¾æœ‰å¤šä½™ç©ºè¡Œã€‚
  - ä¿å­˜æ—¶ï¼ŒVSCode å†…ç½®æ ¼å¼åŒ–å™¨æŠŠæ–‡ä»¶é‡å†™ï¼Œä¼š **è‡ªåŠ¨è¡¥ä¸Šæœ«å°¾ä¸€ä¸ªç©ºè¡Œ**ï¼ˆè¿™æ˜¯å®ƒçš„è¡Œä¸ºï¼‰ï¼Œå¯¼è‡´ Prettier å†æ¬¡æç¤ºé”™è¯¯ã€‚

æ¢å¥è¯è¯´ï¼ŒPrettier çš„æç¤ºå’Œ VSCode çš„ä¿å­˜æ ¼å¼åŒ–è¡Œä¸º **äº’ç›¸å†²çª**ï¼š

- Prettier æƒ³è®©æœ«å°¾æ²¡æœ‰ç©ºè¡Œ â†’ æç¤ºé”™è¯¯
- VSCode JSON formatter æƒ³ä¿è¯æœ«å°¾æœ‰ä¸€ä¸ªæ¢è¡Œ â†’ ä¿å­˜æ—¶è‡ªåŠ¨æ·»åŠ 

------

3ï¸âƒ£ ä¸ºä»€ä¹ˆä¿å­˜è¡Œä¸ºçœ‹èµ·æ¥â€œæ·»åŠ ç©ºè¡Œâ€è€Œä¸æ˜¯åˆ é™¤

- VSCode JSON formatter éµå¾ª **POSIX æ–‡ä»¶è§„èŒƒ**ï¼šæ–‡æœ¬æ–‡ä»¶é€šå¸¸ä»¥æ¢è¡Œç»“å°¾ï¼Œæ‰€ä»¥å®ƒä¼šåœ¨ä¿å­˜æ—¶ç¡®ä¿æœ€åä¸€è¡Œæœ‰æ¢è¡Œã€‚
- Prettier å¯èƒ½é…ç½®äº† `"insert_final_newline": false` æˆ–æ²¡æœ‰æ¥ç®¡ä¿å­˜ â†’ ä¸¤è€…å†²çªå°±å‡ºç°ä½ çœ‹åˆ°çš„ç°è±¡ã€‚

------

4ï¸âƒ£ è§£å†³æ–¹æ¡ˆ

ä½ æœ‰å‡ ç§é€‰æ‹©ï¼š

æ–¹æ¡ˆ Aï¼šè®© Prettier æ¥ç®¡ JSON/JSONC çš„ä¿å­˜æ ¼å¼åŒ–

```
"[json]": {
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.formatOnSave": true
},
"[jsonc]": {
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.formatOnSave": true
}
```

- Prettier æ‰§è¡Œä¿å­˜æ ¼å¼åŒ–
- ESLint åªåšæ ¡éªŒï¼Œä¸ä¿®å°¾éšé€—å·ï¼ˆè§„åˆ™å…³é—­ï¼‰
- å°¾éšé€—å·æ ¹æ® Prettier é…ç½®ä¿ç•™æˆ–åˆ é™¤
- æœ«å°¾ç©ºè¡Œç»Ÿä¸€ç”± Prettier ç®¡ç†

æ–¹æ¡ˆ Bï¼šç¦ç”¨ VSCode å†…ç½® JSON æ ¼å¼åŒ–

```
"[json]": {
  "editor.formatOnSave": false
},
"[jsonc]": {
  "editor.formatOnSave": false
}
```

- ä¿å­˜æ—¶åªæ‰§è¡Œ ESLint `--fix`
- Prettier åªåšæç¤º
- æœ«å°¾ç©ºè¡Œå’Œå°¾éšé€—å·ç”± ESLint è§„åˆ™æ§åˆ¶

æ–¹æ¡ˆ Cï¼šä¿®æ”¹ Prettier é…ç½®

- `.prettierrc` ä¸­åŠ å…¥ï¼š

```
{
  "trailingComma": "all",
  "endOfLine": "lf",
  "insertFinalNewline": true
}
```

- ä¿è¯ä¿å­˜æ—¶ Prettier å’Œ VSCode çš„è¡Œä¸ºä¸€è‡´
- JSONC æ–‡ä»¶å°¾éšé€—å·å’Œæœ«å°¾æ¢è¡Œè¡Œä¸ºå¯ç»Ÿä¸€

------

ğŸ’¡ **æ ¸å¿ƒåŸå› æ€»ç»“**ï¼š

- å°¾éšé€—å·è¢«åˆ é™¤ â†’ JSON/JSONC å†…ç½® formatter æˆ– Prettier æ‰§è¡Œ
- æœ«å°¾ç©ºè¡Œè¡Œä¸ºä¸ä¸€è‡´ â†’ VSCode formatter æƒ³ä¿ç•™æœ€åä¸€è¡Œæ¢è¡Œï¼ŒPrettier æƒ³åˆ é™¤æˆ–æç¤ºé”™è¯¯ â†’ ä¿å­˜æ—¶å†²çª
- ESLint `jsonc` è§„åˆ™å¯¹ä¿å­˜æ ¼å¼ä¸èµ·ä½œç”¨ï¼Œå› ä¸ºå®ƒåªåœ¨ `--fix` æ—¶æ‰ç”Ÿæ•ˆ

:::



### é’ˆå¯¹å¾®ä¿¡å¼€å‘è€…å¹³å°çš„é…ç½®

manifest.json ä¸­ï¼š

```
/* å°ç¨‹åºç‰¹æœ‰ç›¸å…³ */
  "mp-weixin": {
    "appid": "wx4f770923649e818e",
    "setting": {
      "urlCheck": false
    },
```









## ä»£ç é£æ ¼

å®‰è£…æ’ä»¶ï¼š

```
pnpm i -D eslint prettier eslint-plugin-vue @vue/eslint-config-prettier @vue/eslint-config-typescript @vue/tsconfig 
```

æ‰§è¡Œeslintåˆå§‹åŒ–ï¼š

```
pnpm init @eslint/config
```

å®ƒå…¶å®å°±æ˜¯è°ƒç”¨ **`@eslint/create-config`** è¿™ä¸ªå®˜æ–¹å·¥å…·ã€‚

æ‰§è¡Œæµç¨‹

::: details ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

1. **äº¤äº’å¼æé—®**ï¼›
2. æ ¹æ®ç­”æ¡ˆç”Ÿæˆä¸€ä¸ª **é…ç½®æ–‡ä»¶**ï¼ˆ`.eslintrc.ts` / `.eslintrc.js` / `.eslintrc.json`ï¼‰ï¼›
3. æ ¹æ®éœ€è¦ **è‡ªåŠ¨å®‰è£…ç›¸å…³ä¾èµ–**ï¼ˆä¾‹å¦‚ `eslint`ã€`eslint-plugin-vue`ã€`@vue/eslint-config-prettier` ç­‰ï¼‰ï¼›
   - ç”¨çš„æ˜¯ `pnpm add -D`ï¼Œå› ä¸ºè¿™äº›ä¾èµ–éƒ½æ˜¯å¼€å‘ä¾èµ–ã€‚
   - å¦‚æœä½ é€‰äº† Jitiï¼Œä¹Ÿä¼šä¸€å¹¶å®‰è£…ã€‚

æ€»ç»“ä¸€ä¸‹ **`@eslint/create-config v1.10.0`** çš„åˆå§‹åŒ–æµç¨‹å’Œé€‰é¡¹ï¼š

1. **What do you want to lint?**
    â†’ `javascript, json, jsonc, json5, md, css` âœ…
2. **How would you like to use ESLint?**
    â†’ `problems` ï¼ˆæ£€æŸ¥è¯­æ³•å’Œå¸¸è§é—®é¢˜ï¼Œä¸åšé£æ ¼çº¦æŸï¼‰
3. **What type of modules does your project use?**
    â†’ `esm` ï¼ˆES Moduleï¼‰
4. **Which framework does your project use?**
    â†’ `vue` ï¼ˆuni-app åŸºäº Vueï¼‰
5. **Does your project use TypeScript?**
    â†’ `Yes`
6. **Where does your code run?**
    â†’ `browser, node`
7. **Which language do you want your configuration file be written in?**
    â†’ `ts`
8. **What flavor of Markdown do you want to lint?**
    â†’ `commonmark`
9. **Jiti is required for Node.js <24.3.0... Would you like to add Jiti as a devDependency?**
    â†’ å»ºè®®ç°åœ¨ Node18 â†’ é€‰ `Yes` âœ…

è¿™ä¸€æ­¥å¤„ç†å¾ˆå…³é”®ï¼Œå¦åˆ™ TS é¡¹ç›®æ— æ³•æ ¡éªŒç»„ä»¶å±æ€§ç±»å‹ã€‚

:::

ç„¶åï¼Œéœ€è¦æ›´æ”¹é»˜è®¤çš„ eslint é…ç½®æ–‡ä»¶ï¼š

ä»¥ä¸‹æ˜¯åˆå§‹åŒ–åçš„é»˜è®¤é…ç½®ï¼š

```ts
// eslint.config.mts
import { globalIgnores } from 'eslint/config'
import { defineConfigWithVueTs, vueTsConfigs } from '@vue/eslint-config-typescript'
import pluginVue from 'eslint-plugin-vue'
import skipFormatting from '@vue/eslint-config-prettier/skip-formatting'

// To allow more languages other than `ts` in `.vue` files, uncomment the following lines:
// import { configureVueProject } from '@vue/eslint-config-typescript'
// configureVueProject({ scriptLangs: ['ts', 'tsx'] })
// More info at https://github.com/vuejs/eslint-config-typescript/#advanced-setup

export default defineConfigWithVueTs(
  {
    name: 'app/files-to-lint',
    files: ['**/*.{ts,mts,tsx,vue}'],
  },

  globalIgnores(['**/dist/**', '**/dist-ssr/**', '**/coverage/**']),

  pluginVue.configs['flat/essential'],
  vueTsConfigs.recommended,
  skipFormatting,
)
```

é€‚é… prettier ä¹‹åçš„é…ç½®ï¼š

```ts
import { globalIgnores } from 'eslint/config'
import { defineConfigWithVueTs, vueTsConfigs } from '@vue/eslint-config-typescript'
import pluginVue from 'eslint-plugin-vue'
import stylistic from '@stylistic/eslint-plugin'
import skipFormatting from '@vue/eslint-config-prettier/skip-formatting'
// eslint-plugin-prettier å¹¶ä¸å†…ç½®å¤šä¸ªæ ¼å¼è§„åˆ™
// å®ƒåªæä¾›ä¸€æ¡ prettier/prettier è§„åˆ™ï¼Œç”¨æ¥è®© ESLint è°ƒç”¨ Prettier å¹¶æŠŠæ ¼å¼é—®é¢˜å½“æˆ ESLint é”™è¯¯æŠ¥å‘Šå‡ºæ¥
import eslintConfigPrettier from 'eslint-config-prettier/flat' // [!code ++]
// eslintPluginPrettierRecommended å¹¶æ²¡æœ‰è‡ªå·±å®šä¹‰æ ¼å¼è§„åˆ™ï¼Œå®ƒåªæ˜¯æŠŠ Prettier çš„è§„åˆ™å’Œ ESLint è”åŠ¨èµ·æ¥
import eslintPluginPrettierRecommended from 'eslint-plugin-prettier/recommended' // [!code ++]

// To allow more languages other than `ts` in `.vue` files, uncomment the following lines:
// import { configureVueProject } from '@vue/eslint-config-typescript'
// configureVueProject({ scriptLangs: ['ts', 'tsx'] })
// More info at https://github.com/vuejs/eslint-config-typescript/#advanced-setup

export default defineConfigWithVueTs(
  {
    name: 'app/files-to-lint',
    files: ['**/*.{ts,mts,tsx,vue}'],
    plugins: { 
      // ä¸é¢å¤–å•ç‹¬å¯ç”¨ä»»ä½• Stylistic è§„åˆ™ â†’ å¯ä»¥åˆ æ‰
      // å¶å°”æƒ³è¡¥å……ä¸€äº›é Prettier è§„åˆ™ï¼ˆæ¯”å¦‚ç©ºè¡Œã€æ³¨é‡Šé£æ ¼ç­‰ï¼‰ â†’ ä¿ç•™
      // è¿™è¡Œåªæ˜¯å‘Šè¯‰ ESLintï¼šâ€œæˆ‘æœ‰ä¸€ä¸ªå« @stylistic çš„æ’ä»¶ï¼Œå®ƒæä¾›äº†ä¸€å † @stylistic/xxx è§„åˆ™â€ã€‚
      '@stylistic': stylistic,
    },
    // åœ¨ rules é‡Œï¼Œä½ è¦æ‰‹åŠ¨å¯ç”¨ä½ éœ€è¦çš„ Stylistic è§„åˆ™ï¼š
    rules: {},
  },

  globalIgnores(['**/dist/**', '**/dist-ssr/**', '**/coverage/**']),

  pluginVue.configs['flat/essential'],
  vueTsConfigs.recommended,
  // skipFormattingï¼Œä¼š ç¦æ­¢ Prettier æ£€æŸ¥ï¼Œå¯¼è‡´ .prettierrc æ— æ•ˆ // [!code ++]
  // ç”±æ­¤å¯ä»¥çœ‹å‡ºæ‰§è¡Œé¡ºåºçš„æœºåˆ¶ï¼Œå½“ skipFormatting åœ¨å‰æ—¶ï¼Œä¼šè¢«è¦†ç›–ï¼Ÿï¼Ÿï¼Ÿ // [!code ++]
  skipFormatting, // [!code ++]
  eslintConfigPrettier, // [!code ++]
  eslintPluginPrettierRecommended, // [!code ++]
  // âœ… âœ¨ æ’å…¥æ¨èé£æ ¼è§„åˆ™ï¼ˆå®˜æ–¹å»ºè®®çš„æ–¹å¼ï¼Œå‰ææ˜¯ï¼šä¸ä½¿ç”¨prettierï¼‰ // [!code ++]
  // å¯ä»¥ç†è§£ä¸ºï¼Œ@stylistic æ’ä»¶æœ¬æ¥çš„ç›®çš„ï¼š  // [!code ++]
  // æ˜¯æŠŠ ESLint v9 ä¸­ç§»é™¤çš„æ ¼å¼è§„åˆ™ï¼ˆå¦‚ semiã€indent ç­‰ï¼‰é‡æ–°å®ç°ä¸ºæ’ä»¶ã€‚ // [!code ++]
  // è¿™å¥—è§„åˆ™å¹¶ä¸æ˜¯ä¸ºäº†å’Œ Prettier å¹¶ç”¨ï¼Œè€Œæ˜¯: // [!code ++]
  // ç»™ä¸ä½¿ç”¨ Prettier çš„é¡¹ç›®æä¾› ESLint çš„æ ¼å¼æ£€æŸ¥èƒ½åŠ› // [!code ++]
  // stylistic.configs.recommended, // [!code ++]
)
```



## å¼€å‘å·¥å…·å›é¡¾

é€‰æ‹©è‡ªå·±ä¹ æƒ¯çš„ç¼–è¾‘å™¨å¼€å‘ uni-app é¡¹ç›®å³å¯ã€‚

**HbuilderX å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»**
![HbuilderX å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»](../../../public/image-uniapp_picture_7.png)

**VS Code å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»**
![VS Code å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»](../../../public/image-uniapp_picture_8.png)

## ç”¨ VS Code å¼€å‘

ä½¿ç”¨ `VS Code` ç¼–è¾‘å™¨å†™ä»£ç ï¼Œå®ç° tabBar æ¡ˆä¾‹ + è½®æ’­å›¾æ¡ˆä¾‹ã€‚

::: tip æ¸©é¦¨æç¤º

`VS Code` å¯é€šè¿‡å¿«æ·é”® `Ctrl + i` å”¤èµ·ä»£ç æç¤ºã€‚

:::



#  uniappç»„ä»¶åº“

## å®‰è£…

- å®‰è£… sass & sass-loader

```
pnpm i sass sass-loader -D
```



```
pnpm i @dcloudio/uni-ui
```



## **é…ç½®easycom**

ä½¿ç”¨ `npm` å®‰è£…å¥½ `uni-ui` ä¹‹åï¼Œéœ€è¦é…ç½® `easycom` è§„åˆ™ï¼Œè®© `npm` å®‰è£…çš„ç»„ä»¶æ”¯æŒ `easycom`

æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `pages.json` å¹¶æ·»åŠ  `easycom` èŠ‚ç‚¹ï¼š

```javascript
// pages.json
{
	"easycom": {
		"autoscan": true,
		"custom": {
			// uni-ui è§„åˆ™å¦‚ä¸‹é…ç½®
			"^uni-(.*)": "@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue"
		}
	},
	
	// å…¶ä»–å†…å®¹
	pages:[
		// ...
	]
}
```



## **å®‰è£…ç±»å‹æ–‡ä»¶**

```
pnpm i -D @uni-helper/uni-app-types @uni-helper/uni-ui-types
```



## å…³äº uni-ui ç»„ä»¶æ ‡ç­¾ä¸é«˜äº®çš„ä¸€ä¸ªå‘

é¡¹ç›® src/env.d.ts å½“ä¸­

```
/// <reference types="vite/client" />

declare module '*.vue' {
  import { DefineComponent } from 'vue'

  const component: DefineComponent<object, object, unknown>
  // const component: DefineComponent<object, object, any>
  export default component
}
```

å…¶ä¸­ï¼Œç°è±¡ï¼š

- unknown æ—¶ uni-ui ç»„ä»¶æ ‡ç­¾é«˜äº®

- any æ—¶ï¼Œç»„ä»¶æ ‡ç­¾ä¸é«˜äº®

**å…¶ä»–é¡¹ç›®å³ä½¿ `.vue` æ¨¡å—å£°æ˜ç”¨çš„æ˜¯ `DefineComponent<{}, {}, any>`ï¼Œä¹Ÿèƒ½é«˜äº®**ï¼Œè¿™ä¸»è¦å’Œ Volar çš„ç‰ˆæœ¬ã€Vite é…ç½®ä»¥åŠé¡¹ç›®ä¾èµ–è§£ææœ‰å…³ã€‚æˆ‘ä»¬å¯ä»¥åˆ†æä¸€ä¸‹åŸå› ï¼š

------

 1ï¸âƒ£ Volar å¯¹é«˜äº®çš„ç±»å‹æ¨å¯¼é€»è¾‘

Volar åœ¨æ¨¡æ¿é‡Œåˆ¤æ–­ `<UniCard>` æ˜¯å¦ä¸ºå·²çŸ¥ç»„ä»¶æ—¶ï¼Œä¼šç»“åˆå‡ ä¸ªæ¥æºï¼š

1. **å…¨å±€ç»„ä»¶å£°æ˜ (`GlobalComponents`)**
   - Volar ä¼˜å…ˆä»è¿™é‡Œè·å–ç»„ä»¶ä¿¡æ¯ï¼Œé«˜äº®ä¾èµ–æ­¤å¤„å­˜åœ¨ç±»å‹ä¿¡æ¯ã€‚
2. **æ¨¡å—å£°æ˜ (`\*.vue`)**
   - å‘Šè¯‰ TypeScript å¯¼å…¥ `.vue` æ–‡ä»¶å¾—åˆ°ä»€ä¹ˆç±»å‹
   - ç±»å‹ä¸éœ€è¦å…·ä½“ propsï¼Œåªè¦æ˜¯ `DefineComponent` æˆ–å…¼å®¹ç±»å‹å³å¯
3. **Volar æ’ä»¶ç‰ˆæœ¬å’Œ â€œTake Over Modeâ€**
   - ä¸åŒç‰ˆæœ¬åœ¨æ¨¡æ¿ç±»å‹æ¨å¯¼ä¸Šæœ‰ä¼˜åŒ–
   - â€œTake Over Modeâ€ ä¼šè®© Volar æ‰«ææ•´ä¸ªé¡¹ç›®ï¼Œå¢å¼ºé«˜äº®å’Œæ™ºèƒ½æç¤º

------

2ï¸âƒ£ ä¸ºä»€ä¹ˆ `any` æœ‰æ—¶ä¼šç”Ÿæ•ˆï¼Œæœ‰æ—¶ä¸ç”Ÿæ•ˆ

```
const component: DefineComponent<{}, {}, any>
```

- **ç”Ÿæ•ˆæ¡ä»¶**ï¼š
  - `GlobalComponents` ä¸­æ˜ç¡®å£°æ˜äº† `UniCard` ç­‰ç»„ä»¶
  - Volar ç‰ˆæœ¬è¾ƒæ–°ï¼Œæ¨¡æ¿ç±»å‹æ¨å¯¼æ›´å®½æ¾
  - â€œTake Over Modeâ€ æˆ–ç±»ä¼¼è®¾ç½®å¯ç”¨
- **ä¸ç”Ÿæ•ˆæ¡ä»¶**ï¼š
  - `GlobalComponents` æœªå£°æ˜ç»„ä»¶
  - Volar ç‰ˆæœ¬ç¨è€ï¼Œå¯¹ `any` å¤ªå®½æ³›çš„ç±»å‹ä¼šè·³è¿‡æ¨¡æ¿é«˜äº®
  - é¡¹ç›®ä¾èµ–æˆ– TypeScript ç‰ˆæœ¬å·®å¼‚å¯¼è‡´ç±»å‹è§£æå¤±è´¥

æ¢å¥è¯è¯´ï¼Œ`any` æœ¬èº«æ²¡æœ‰é˜»æ­¢é«˜äº®ï¼Œä½†**é«˜äº®ä¾èµ–ä¸Šä¸‹æ–‡**ï¼ˆå…¨å±€ç»„ä»¶ã€Volar ç‰ˆæœ¬ã€Take Over Mode ç­‰ï¼‰ã€‚

------

3ï¸âƒ£ å®è·µç»éªŒ

1. å¯¹ `.vue` æ¨¡å—å£°æ˜ï¼Œ**ç”¨ `{}` æˆ– `unknown` æˆ– `any` éƒ½å¯**ï¼Œåªè¦ Volar èƒ½è¯†åˆ«ä¸º `DefineComponent` ç±»å‹å³å¯ã€‚
2. å…¨å±€ç»„ä»¶å£°æ˜ (`components.d.ts`) ä¸­å£°æ˜ç»„ä»¶åç§°å’Œç±»å‹ï¼Œæ˜¯æ¨¡æ¿é«˜äº®æœ€å…³é”®çš„ä¸€æ­¥ã€‚
3. å¦‚æœé‡åˆ°ä¸é«˜äº®ï¼Œå»ºè®®æ£€æŸ¥ï¼š
   - Volar æ’ä»¶æ˜¯å¦æœ€æ–°
   - TypeScript ç‰ˆæœ¬ï¼ˆ>= 4.9 æˆ– 5.xï¼‰
   - æ˜¯å¦å¼€å¯ Take Over Mode
   - `.vue` æ¨¡å—å£°æ˜å’Œ `GlobalComponents` æ˜¯å¦åŒ¹é…

------

âœ… **ç»“è®º**ï¼š

- é«˜äº®å¹¶éå®Œå…¨ä¾èµ– `.vue` æ¨¡å—å£°æ˜çš„ `any`/`unknown`ï¼Œè€Œæ˜¯**Volar èƒ½å¦è¯†åˆ«å¯¼å…¥ç»„ä»¶ç±»å‹ + å…¨å±€ç»„ä»¶å£°æ˜**
- æ‰€ä»¥å…¶ä»–é¡¹ç›®ä¸­ `any` ä¹Ÿèƒ½é«˜äº®ï¼Œæ˜¯å› ä¸ºå…¨å±€ç»„ä»¶å£°æ˜å’Œ Volar é…ç½®å·²ç»æ»¡è¶³äº†æ¡ä»¶

## æ¨ç¿»å‰é¢çš„æ ‡ç­¾é«˜äº®ç»“è®º

ç»è¿‡å¯¹æ¯”æ–°æ—§é¡¹ç›®çš„ ts.config.json æ–‡ä»¶ï¼Œæˆ‘å‘ç°

::: code-group

``` json [æœ€æ–°æ‹‰å–çš„é¡¹ç›® ts.config.json åˆå§‹åŒ–é…ç½®]
{
  "extends": "@vue/tsconfig/tsconfig.json",
  "compilerOptions": {
    "sourceMap": true,
    "verbatimModuleSyntax": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    },
    "lib": ["esnext", "dom"],
    "types": [
      "@dcloudio/types",
      "miniprogram-api-typings",
      "@uni-helper/uni-app-types",
      "@uni-helper/uni-ui-types"
    ]
  },
  "vueCompilerOptions": {
    "plugins": ["@uni-helper/uni-app-types/volar-plugin"]
  },
  "include": [
    "src/**/*.ts",
    "src/**/*.d.ts",
    "src/**/*.tsx",
    "src/**/*.vue",
    "*.d.ts"
  ]
}
```

``` json [å°å…”é²œé¡¹ç›®åˆå§‹åŒ–ä»£ç  ts.config.json]
{
  "extends": "@vue/tsconfig/tsconfig.json",
  "compilerOptions": {
    "allowJs": true,
    "sourceMap": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    },
    "lib": ["esnext", "dom"],
    "types": [
      "@dcloudio/types",
      "miniprogram-api-typings",
      "@uni-helper/uni-app-types",
      "@uni-helper/uni-ui-types"
    ]
  },
  "vueCompilerOptions": {
    // experimentalRuntimeMode å·²åºŸå¼ƒï¼Œè¯·å‡çº§ Vue - Official æ’ä»¶è‡³æœ€æ–°ç‰ˆæœ¬
    "plugins": ["@uni-helper/uni-app-types/volar-plugin"]
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"]
}
```

:::

ç»è¿‡æ´’å®¶çš„ç²¾ç»†é¢—ç²’åº¦å¯¹æ¯”ï¼š

**ä»…ä»…å¢åŠ  `allowJs: true` å¹¶ä¸èƒ½è§£å†³é—®é¢˜**ï¼Œå¿…é¡»å®Œå…¨ç…§æ¬åŸæ–°é¡¹ç›®çš„ tsconfig æ‰èƒ½ä½¿ç»„ä»¶æ‚¬åœæç¤ºæ­£å¸¸ã€‚åŸå› å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªè§’åº¦åˆ†æï¼š

------

### 1. **`extends: "@vue/tsconfig/tsconfig.json"`**

- ä¸¤è€…éƒ½ä½¿ç”¨äº†è¿™ä¸ªåŸºç¡€é…ç½®ï¼Œå› æ­¤ä¸åº”è¯¥æ˜¯å·®å¼‚çš„æ¥æºã€‚
- ä½†éœ€è¦æ³¨æ„ï¼Œå®Œå…¨ç…§æ¬çš„é…ç½®åœ¨ `"compilerOptions"` ä¸­åŠ å…¥äº† `allowJs: true`ï¼Œå¹¶ä¸”æ²¡æœ‰ `verbatimModuleSyntax: true`ï¼Œè€Œä½ åªå¢åŠ äº† `allowJs` å¹¶ä¿ç•™äº† `verbatimModuleSyntax: true`ã€‚

------

### 2. **`verbatimModuleSyntax: true` çš„å½±å“**

- `verbatimModuleSyntax` ä¼šè®© TS æ›´ä¸¥æ ¼åœ°è§£æ ES æ¨¡å—å¯¼å…¥/å¯¼å‡ºã€‚
- åœ¨ Uni App + Volar ç¯å¢ƒä¸‹ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ `.vue` ç»„ä»¶ç±»å‹æ¨å¯¼ä¸å®Œå…¨ï¼Œå°¤å…¶æ˜¯é€šè¿‡ `@uni-helper/uni-app-types/volar-plugin` æ³¨å…¥çš„ç»„ä»¶ç±»å‹ã€‚
- æ¢å¥è¯è¯´ï¼Œ**å¯ç”¨ `verbatimModuleSyntax` åï¼ŒVolar æ’ä»¶æ— æ³•æ­£ç¡®è¯†åˆ« Uni UI ç»„ä»¶çš„ props/emit ç±»å‹**ï¼Œå¯¼è‡´æ‚¬åœæç¤ºæ¶ˆå¤±ï¼Œå³ä½¿é«˜äº®ä»ç„¶å­˜åœ¨ã€‚

------

### 3. **`include` é…ç½®çš„å·®å¼‚**

- å®Œå…¨ç…§æ¬çš„ tsconfig åªåŒ…å« `"src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"`ï¼Œè€Œæ—§é…ç½®ä¸­ä½ åŠ äº† `"*.d.ts"`ã€‚
- è™½ç„¶è¿™é€šå¸¸ä¸ä¼šå½±å“ç»„ä»¶æç¤ºï¼Œä½†åœ¨æŸäº›ç¯å¢ƒä¸‹ï¼ŒVSCode/TS Server ä¼šæ ¹æ® `include` æ¥è§¦å‘ç±»å‹æ¨å¯¼ï¼Œé¢å¤–çš„ `"*.d.ts"` å¯èƒ½å¼•å…¥ä¸å¿…è¦çš„å…¨å±€å£°æ˜ï¼Œåè€Œå¹²æ‰°æ’ä»¶è¡Œä¸ºã€‚

------

### 4. **æ ¸å¿ƒç»“è®º**

- **å…³é”®å·®å¼‚åœ¨äº `verbatimModuleSyntax: true`**ã€‚
- å¿…é¡»å®Œå…¨ç…§æ¬åŸæ–°é¡¹ç›® tsconfigï¼ˆæ²¡æœ‰ verbatimModuleSyntaxï¼Œå¹¶ä¸”å¯ç”¨ `allowJs: true`ï¼‰ï¼Œæ‰èƒ½è®© Volar æ­£ç¡®è§£æ Uni UI ç»„ä»¶ç±»å‹ï¼Œæ˜¾ç¤º **æ‚¬åœæç¤º**ã€‚
- é«˜äº®ä¾èµ– `.vue` æ–‡ä»¶å£°æ˜ + Volar æ’ä»¶ï¼Œä½†æ‚¬åœæç¤ºä¾èµ– Volar èƒ½å¤Ÿè§£æç»„ä»¶çš„å®Œæ•´ç±»å‹ä¿¡æ¯ï¼Œè€Œ verbatimModuleSyntax ä¼šé˜»ç¢è¿™ä¸ªè§£æè¿‡ç¨‹ã€‚

------

âœ… **æ€»ç»“**

- **é«˜äº®**ï¼šç”± `.vue` ç±»å‹å£°æ˜ + Volar æ’ä»¶æä¾›ï¼Œå’Œ tsconfig å…³ç³»ä¸å¤§ã€‚
- **æ‚¬åœæç¤º**ï¼šä¾èµ– TS å®Œæ•´ç±»å‹æ¨å¯¼ + Volar æ’ä»¶ + `allowJs: true` + ä¸ä½¿ç”¨ `verbatimModuleSyntax`ã€‚
- å› æ­¤ï¼Œ**å¿…é¡»å®Œå…¨ç…§æ¬æ–°é¡¹ç›®çš„ tsconfig æ‰èƒ½ä¿è¯æ‚¬åœæç¤ºæ­£å¸¸**ã€‚
